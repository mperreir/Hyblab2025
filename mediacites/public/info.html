<!DOCTYPE html>

<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <title>Infos Projet Mediacites</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="css/mediacites.css">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <style>
        body {
            font-family: 'IBM Plex Mono'
        }
    </style>
</head>
<body>
    <nav class="sticky-top">
      <div class="navigation-header btn-group btn-group-justified" role="group"> 
        <button onclick="location.href='home.html'" class="btn btn-outline-secondary" type="button" style="border-radius: 4vh 4vh 4vh 4vh; margin-right: 10px; font-style: normal;">
            üè†
        </button>
        <!-- Certains boutons pas impl√©ment√©s en raison de la limite de temps -->
        <!-- TODO : illuminer le bouton qui correspond √† la cat√©gorie dans laquelel on est -->
        <button class="btn btn-outline-secondary" type="button" style="border-radius: 4vh 0vh 0vh 4vh;"> ACTION SOCIALE ET SANT√â</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
        <button class="btn btn-outline-secondary" type="button" > CITOYENNET√â</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
        <button class="btn btn-outline-secondary" type="button" > CULTURE ET TOURISME</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
        <button onclick="redirect('education')" class="btn btn-outline-secondary" type="button"> √âDUCATION</button>
        <button onclick="redirect('environnement') " class="btn btn-outline-secondary" type="button"> ENVIRONNEMENT</button>
        <button class="btn btn-outline-secondary" type="button"> MOBILIT√âS</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
        <button class="btn btn-outline-secondary" type="button" > S√âCURIT√â</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
        <button class="btn btn-outline-secondary" type="button" > URBANISME ET LOGEMENT</button> <!-- onclick="redirect('nom_de_la_categorie')" --> 
      </div>
    </nav>
    <div>
      <h1 style="font-size: 4vw; font-style: italic; margin: 20px; margin-bottom: 0;">
          <span style="color: #FF0023; font-family: 'IBM Plex Mono'; margin-right: -20px;"><strong>SIMPLI'</strong></span>
          <span style="color: #808080; font-family: 'IBM Plex Mono'; margin-left: -20px;"><strong>CIT√âS</strong></span>
      </h1>
    </div>
    <div>
      <h1 style="font-size: 3vw; margin-left: 15vw; color:#3370E7; font-style: italic;">INFORMATIONS</h1>
    </div>

    <div class="container-fluid" style="padding-left: 5vh;">
        <div class="row">
            <!-- Left Container (1/3 of the page) -->
            <div class="col-4 left-container" style="width: 100%; height: 77vh; border: 1vh; border-radius: 4vh; position: sticky; top: 60px; display: flex; flex-direction: column; justify-content: flex-start; align-items: flex-start;">
                <div class="logo">
                    <img src="img/logo_mediacites.png" alt="Logo">
                </div>
                <div class="description" style="border-radius: 4vh 4vh 4vh 4vh; width: 30vw; text-align: left;">
                D√©couvrez la synth√®se des d√©cisions du conseil municipal en navigant √† travers les diff√©rentes cat√©gories.
                </div>
                <div class="actions">
                    <button class="custom-button" onclick="location.href='index.html'">  ‚Üê  </button>
                </div>
            </div>
            <!-- Right Container (2/3 of the page) -->
            <div class="col-8 right-container overflow-auto">
                <!-- r√©sum√© -->
                <div class="row" style="padding-right: 3vh;">
                    <div class="col" style="width: 100%; background-color: #3370E7; height: fit-content; border: 1vh solid white; border-radius: 4vh 4vh 4vh 4vh;">
                        <h3 id="titreResume" style="font-size: 4vw; color: white; text-align: right; font-style: italic;">R√©sum√©</h3>
                        <p id="resumeGeneral" style="color: white;"><!-- TODO changer dynamiquement-->Texte contenant la majorit√© des infos condens√©es</p>
                    </div>
                </div>

                <!-- KPIs -->
                <div class="row" style="padding-right: 3vh; display:flex;">
                    <div class="col" style="width: 100%; background-color: #FF0023; height: auto; border: 1vh solid white; border-radius: 4vh 4vh 4vh 4vh;">
                        <h3 id="kpi1" style="font-size: 4vw; color: white; text-align: right;" >KPI 1</h3>
                        <p id="textkpi1" style="color: white;"><!-- TODO changer dynamiquement-->Texte r√©sum√© cat√©gorie 1</p>
                    </div>
                    <div class="col" style="width: 100%; background-color: #565656; height: auto; border: 1vh solid white; border-radius: 4vh 4vh 4vh 4vh;">
                        <h3 id="kpi2" style="font-size: 4vw; color: white; text-align: right;" >KPI 2</h3>
                        <p id="textkpi2" style="color: white;"><!-- TODO changer dynamiquement-->Texte r√©sum√© cat√©gorie 1</p>
                    </div>
                </div>
                
                <!-- Pour en savoir plus -->
                <div class="row" style="padding-right: 3vh;">
                    <div class="col" style="width: 100%; background-color: #3370E7; height: fit-content; border: 1vh solid white; border-radius: 4vh 4vh 4vh 4vh;">
                        <h3 id="titreArticle" style="font-size: 4vw; color: white; font-style: italic;">Pour en savoir plus</h3>
                        <p id="texteArticle" style="color: white;"><!-- TODO changer dynamiquement-->Texte d√©taill√©</p>
                    </div>
                </div>
                <!-- Liens -->
                <div class="row" style="padding-right: 3vh;">
                    <div class="col" style="width: 100%; background-color: #565656; height: fit-content; border: 1vh solid white; border-radius: 4vh 4vh 4vh 4vh;">
                        <div class="row">
                            <div class="col-8">
                                <h3 class="d-flex" style="font-size: 4vw; color: white; text-align:left; font-style: italic;" >Cr√©dits</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-8">
                                <p style="color: white;"> Ver sind the d√©lib√©ration?</p>
                            </div>
                        </div>                       
                    </div>
                </div>
                <!-- Logos -->
                <div class="row" style="padding-right: 3vh;">
                    <div class="col-8" style="margin-left:1vh; margin-top:0.5vh; background-color: white; min-width: calc(100% - 1.5vh) !important; height: fit-content; border: 1vh solid black; border-radius: 4vh 4vh 4vh 4vh;">
                        <div class="row align-items-center">
                            <div class="col-1" style="width: max-content;"></div>
                            <div class="col-2 text-center"><a href="http://www.polytech.univ-nantes.fr/"><img src="ecoles/logo_polytech.png" alt="Polytech Nantes" class="img-fluid"></a></div>
                            <div class="col-2 text-center"><a href="http://www.agrnantes.fr"><img src="ecoles/logo_agr.png" alt="AGR √©cole de l'image" class="img-fluid"></a></div>
                            <div class="col-2 text-center"><a href="https://www.sciencespo-rennes.fr/"><img src="ecoles/logo_sciencespo.svg" alt="SciencesPo" class="img-fluid"></a></div>
                            <div class="col-2 text-center"><img id="opensource" src="logo_opensource.png" alt="Open source" class="img-fluid"></div>    
                            <div class="col-2 text-center"><img id="cc" src="logo_cc.png" alt="Creative commons" class="img-fluid"></div>
                            <div class="col-1" style="width: max-content;"></div>
                        </div>
                        <div class="row align-items-center">
                            <div class="col-1" style="width: max-content;"></div>
                            <div class="col-2 text-center"><a href="http://www.ouestmedialab.fr/"><img src="logo_oml.png" alt="Ouest M√©dialab" class="img-fluid"></a></div>
                            
                            <div class="col-2 text-center"><img src="img/logo_hyblab.png" id="logo-hyblab" alt="logo hyblab" class="img-fluid"></div>
                            <div class="col-2 text-center"><a href="http://www.nantesmetropole.fr/"><img class="img-fluid" src="institutionnels/logo_nantesmetropole.png" alt="Nantes M√©tropole"></a></div>
                            <div class="col-2 text-center"><img src="institutionnels/logo_pdl.png" alt="Pays de la Loire" class="img-fluid"></div>
                            <div class="col-2 text-center"><img src="img/logo-mediacites-full.svg" alt="M√©diacit√©s" class="img-fluid"></div>
                            <div class="col-1" style="width: max-content;"></div>
                        </div>
                    </div>
                </div>
                <!-- Bouton remonter-->
                <div class="row" style="padding-right: 3vh;">
                    <div class="col" style="width: 100%; text-align: right;">
                        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'});" class="btn btn-outline-secondary" style="font-size: 2vw; border-radius: 4vh 4vh 4vh 4vh;">
                            &#8679;
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>  

      <script>
    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);
    const name = urlParams.get('name')
    console.log(name);

    const kpi1 = document.getElementById("kpi1");
    const kpi2 = document.getElementById("kpi2");
    const textkpi1 = document.getElementById("textkpi1");
    const textkpi2 = document.getElementById("textkpi2");
    const resumeGeneral = document.getElementById("resumeGeneral");
    const titreResume = document.getElementById("titreResume");
    const titreArticle = document.getElementById("titreArticle");
    const texteArticle = document.getElementById("texteArticle");

    // R√©cup√©ration des kpi et leur texte associ√©
    fetch(`/mediacites/api/articles/${name}/kpis`)
        .then(response => response.json())
        .then(kpis => {
            console.log(kpis);
            kpi1.innerHTML = kpis[0].number;
            textkpi1.innerText = kpis[0].text;

            kpi2.innerHTML = kpis[1].number;
            textkpi2.innerText = kpis[0].text;

        })
        .catch(error => console.error('Error fetching JSON:', error));


    // R√©cup√©ration du r√©sum√© de l'article
    fetch(`/mediacites/api/articles/${name}/resume`)
        .then(response => response.json())
        .then(text => {
            resumeGeneral.innerText = text;

        })
        .catch(error => console.error('Error fetching JSON:', error));


    // R√©cup√©ration du nom de l'article
    fetch(`/mediacites/api/articles/${name}/name`)
        .then(response => response.json())
        .then(name => {
            titreResume.innerText = name;
            titreArticle.innerText = name;

        })
        .catch(error => console.error('Error fetching JSON:', error));


    // R√©cup√©ration du nom de l'article
    fetch(`/mediacites/api/articles/${name}/text`)
        .then(response => response.json())
        .then(text => {
            texteArticle.innerText = text;

        })
        .catch(error => console.error('Error fetching JSON:', error));

     // pour les boutons en haut de page
     function redirect(name) {
        newUrl = window.location.href.split("?")[0]+"?name="+name;
        location.href = newUrl;
    }
    </script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
</body>